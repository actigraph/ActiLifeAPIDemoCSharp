<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="ActiLife API C# : CSharp implementation of the ActiLife API; including a communication library and graphical testing application.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>ActiLife API C#</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/actigraph/ActiLifeAPIDemoCSharp">View on GitHub</a>

          <h1 id="project_title">ActiLife API C#</h1>
          <h2 id="project_tagline">CSharp implementation of the ActiLife API; including a communication library and graphical testing application.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/actigraph/ActiLifeAPIDemoCSharp/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/actigraph/ActiLifeAPIDemoCSharp/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>This repository contains C# implementations of the ActiLife API.</p>

<ul>
<li>
<a href="http://actigraphcorp.com/actilife">ActiLife</a> 6.7 or greater is required to utilize the API Tester and Library.</li>
<li>The API feature toggle must be licensed through ActiGraph.</li>
</ul><h1>
<a name="actilife-api-documentation" class="anchor" href="#actilife-api-documentation"><span class="octicon octicon-link"></span></a>ActiLife API Documentation</h1>

<p>This codebase is built on the ActiLife API documentation: <a href="https://github.com/actigraph/ActiLifeAPIDocumentation">https://github.com/actigraph/ActiLifeAPIDocumentation</a></p>

<h1>
<a name="actilifeapilibrary" class="anchor" href="#actilifeapilibrary"><span class="octicon octicon-link"></span></a>ActiLifeAPILibrary</h1>

<p>Library that provides an easy to use implementation of ActiLife API.  This ActilifeAPILibrary handles connecting, sending and receiving data from ActiLife with public endpoints wrapped in c# methods.  The Library is based on .NET 4.0 and utilizes Tasks to ensure long running tasks do not block the calling threads.</p>

<h4>
<a name="connecting-to-actilife-via-the-api-and-obtaining-a-result" class="anchor" href="#connecting-to-actilife-via-the-api-and-obtaining-a-result"><span class="octicon octicon-link"></span></a>Connecting to ActiLife via the API and obtaining a result</h4>

<pre><code>using (var api = new ActiLifeAPILibrary.ActiLifeAPIConnection())
{
  try {
    bool connected = await api.Connect();
    if (!api.IsConnected) return; //can also use connected bool

    string responseJSON = await api.GetActiLifeVersion();
  }
  catch(AggregateException ex) { } //handle Task specific exception
  catch(Exception ex) { } //handle misc exception
}
</code></pre>

<h4>
<a name="parsing-json-data" class="anchor" href="#parsing-json-data"><span class="octicon octicon-link"></span></a>Parsing JSON Data</h4>

<p>Parsing data received from ActiLife is recommended via JSON.net.  The ActilifeAPILibrary contains an extension to easily obtain data from the JSON.net JObject/JToken class that is returned from Deserializing the JSON string:</p>

<pre><code>using (var api = new ActiLifeAPILibrary.ActiLifeAPIConnection())
{
  try {
    bool connected = await api.Connect();
    if (!api.IsConnected) return; //can also use connected bool

    JObject parsedJSON = JsonConvert.DeserializeObject&lt;JObject&gt;(await api.GetActiLifeVersion());

    bool success = parsedJSON.GetValueFromJToken&lt;bool&gt;("Success");
    if (!success) Console.WriteLine("ActiLife did not handle API command!");
    else
    {
      var payload = parsedJSON['payload'];
      if (payload != null)
      {
        string version = payload.GetValueFromJToken&lt;string&gt;("Version");

        Console.WriteLine(version);
      }
    }
  }
  catch(AggregateException ex) { } //handle Task specific exception
  catch(Exception ex) { } //handle misc exception
}
</code></pre>

<p>Will print a version string similar to:</p>

<blockquote>
<p>6.11.0</p>
</blockquote>

<p>The <strong>GetValueFromJToken()</strong> is an extension and might require a using statement to be used:</p>

<pre><code>using ActiLifeAPILibrary;
</code></pre>

<h4>
<a name="using-library-endpoints-with-request-models" class="anchor" href="#using-library-endpoints-with-request-models"><span class="octicon octicon-link"></span></a>Using Library endpoints with Request Models</h4>

<p>All ActiLife API endpoints (or Actions) are represented with the ActilifeAPILibrary extended on the <strong>ActiLifeAPIConnection</strong>.  Some of these Actions require options (or Arguments) for ActiLife to respond.  These models can be inlined to the api call:</p>

<pre><code>using (var api = new ActiLifeAPILibrary.ActiLifeAPIConnection())
{
  try {
    bool connected = await api.Connect();
    if (!api.IsConnected) return; //can also use connected bool

    var assemblyDir = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);

    string responseJSON = api.ConvertFile(
      new ActiLifeAPILibrary.Models.Request.ConvertFile
      {
        Options = new ActiLifeAPILibrary.Models.Actions.ConvertFile
        {
          FileInputPath = System.IO.Path.Combine(assemblyDir, "input.gt3x"),
          FileOutputPath = System.IO.Path.Combine(assemblyDir, "output.csv"),
          FileOutputFormat = "rawcsv"
        }
      }
    );
  }
  catch(AggregateException ex) { } //handle Task specific exception
  catch(Exception ex) { } //handle misc exception
}
</code></pre>

<h1>
<a name="actilifeapitester" class="anchor" href="#actilifeapitester"><span class="octicon octicon-link"></span></a>ActiLifeAPITester</h1>

<p>This project is a .NET 4.0 GUI application built on the ActilifeAPILibrary that provides an easy way to test requests and responses against ActiLife. </p>

<p>To use, run ActiLife with the API feature toggle enabled. The GUI can then be connected to ActiLife and the built in tests can be populated to the upper request text area. Responses are then obtained by clicking Send Request.</p>

<p>Pre-built releases are found in the <a href="https://github.com/actigraph/ActiLifeAPIDemoCSharp/releases">release section of this repository</a></p>

<p><img src="https://cloud.githubusercontent.com/assets/92913/3757691/1e56f114-183c-11e4-852f-f11bf0b1071b.png" alt="2014-07-30_17-50-33"></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">ActiLife API C# maintained by <a href="https://github.com/actigraph">actigraph</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
